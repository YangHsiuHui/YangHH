<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>äº”å¤§è³‡è¨Šç³»çµ±å¹³å°</title>
<link href="https://fonts.googleapis.com/css2?family=Ma+Shan+Zheng&family=Noto+Serif+TC:wght@400;700&display=swap" rel="stylesheet">
<style>

     /* ç¶²å€åˆ—æ¨£å¼ */
    nav a {
      color: white;
      text-decoration: none;
      font-size: 16px;
      font-weight: 700;
    }
    nav a:hover {
      text-decoration: underline;
    }

body {
  font-family: 'Noto Serif TC', serif;
  margin:0;
  background:#fdf6f0;
  color:#5b3a29;
}
header {
  background:#e8b4a2;
  color:#fff;
  padding:15px;
  text-align:center;
  font-size:2em;
  font-family: 'Ma Shan Zheng', cursive;
}
nav {
  display:flex;
  justify-content:center;
  flex-wrap:wrap;
  background:#f5c6aa;
  padding:8px;
}
nav button {
  margin:4px;
  padding:8px 14px;
  background:#d4a373;
  color:#fff;
  border:none;
  cursor:pointer;
  border-radius:4px;
  font-size:1em;
  font-family: 'Noto Serif TC', serif;
}
nav button.active {
  background:#c38e70;
}
main {
  max-width:1000px;
  margin:20px auto;
  background:#fffaf5;
  padding:20px;
  border-radius:10px;
  box-shadow:0 0 8px rgba(0,0,0,0.08);
}
h2 { margin-top:0; }
form { margin-bottom:10px; }
input, button {
  padding:5px;
  margin:3px;
  border:1px solid #ccc;
  border-radius:4px;
}
button[type="submit"] {
  background:#e5989b;
  color:#fff;
  border:none;
}
button.action-btn {
  background:#c38e70;
  color:#fff;
  border:none;
  padding:3px 8px;
  border-radius:4px;
}
table {
  width:100%;
  border-collapse:collapse;
  margin-top:10px;
}
th, td {
  border:1px solid #ddd;
  padding:8px;
}
canvas {
  margin-top:20px;
  display:block;
  background:#fff7f0;
  border:1px solid #ddd;
  border-radius:4px;
}
footer {
  text-align:center;
  padding:12px;
  font-size:0.9em;
  color:#7f675b;
}
</style>
</head>
<body>
<header>äº”å¤§è³‡è¨Šç³»çµ±å¹³å°</header>
<nav>

 <!-- ç¶²å€åˆ— -->
  <nav>
    <a href="sys.html"> ğŸ  å›é¦–é ï¼ˆè³‡è¨Šç³»çµ±ï¼‰ </a>
    <a href="resume.html">ã€‚  å±¥æ­·</a>
  </nav>

  <button data-topic="äº¤æ˜“è™•ç†ç³»çµ±" class="active">äº¤æ˜“è™•ç†ç³»çµ±</button>
  <button data-topic="ç®¡ç†è³‡è¨Šç³»çµ±">ç®¡ç†è³‡è¨Šç³»çµ±</button>
  <button data-topic="æ±ºç­–æ”¯æ´ç³»çµ±">æ±ºç­–æ”¯æ´ç³»çµ±</button>
  <button data-topic="çŸ¥è­˜ç®¡ç†ç³»çµ±">çŸ¥è­˜ç®¡ç†ç³»çµ±</button>
  <button data-topic="é«˜éšä¸»ç®¡è³‡è¨Šç³»çµ±">é«˜éšä¸»ç®¡è³‡è¨Šç³»çµ±</button>
</nav>
<main>
  <h2 id="topic-title"></h2>
  <p id="topic-desc"></p>

  <form id="item-form">
    <input type="hidden" id="item-id">
    åç¨±ï¼š<input id="item-name" required>
    æ•¸é‡ï¼š<input id="item-qty" type="number" min="1" value="1" required>
    <button type="submit">å„²å­˜</button>
    <button type="button" id="clear-form">æ¸…é™¤</button>
  </form>

  <table id="items-table">
    <thead><tr><th>åç¨±</th><th>æ•¸é‡</th><th>æ“ä½œ</th></tr></thead>
    <tbody></tbody>
  </table>

  <canvas id="pieChart" width="400" height="300"></canvas>
</main>
<footer>Â© 2025 äº”å¤§è³‡è¨Šç³»çµ±ç¯„ä¾‹å¹³å°</footer>

<script>
// äº”å¤§ä¸»é¡Œèˆ‡ç¯„æœ¬è³‡æ–™
const topics = {
  "äº¤æ˜“è™•ç†ç³»çµ±": {
    desc: "å¸³å–®ã€è¨‚å–®ã€è–ªè³‡",
    data: [
      {id:"1", name:"å¸³å–®", qty:10},
      {id:"2", name:"è¨‚å–®", qty:7},
      {id:"3", name:"è–ªè³‡", qty:8}
    ]
  },
  "ç®¡ç†è³‡è¨Šç³»çµ±": {
    desc: "å ±è¡¨ã€äº¤æ˜“ç¸¾æ•ˆã€åŠ ç­è²»ç”¨",
    data: [
      {id:"1", name:"å ±è¡¨", qty:8},
      {id:"2", name:"äº¤æ˜“ç¸¾æ•ˆ", qty:6},
      {id:"3", name:"åŠ ç­è²»ç”¨", qty:3}
    ]
  },
  "æ±ºç­–æ”¯æ´ç³»çµ±": {
    desc: "é›»å­è¡¨å–®ã€é›»å­å…¬æ–‡",
    data: [
      {id:"1", name:"é›»å­è¡¨å–®", qty:9},
      {id:"2", name:"é›»å­å…¬æ–‡", qty:4}
    ]
  },
  "çŸ¥è­˜ç®¡ç†ç³»çµ±": {
    desc: "çŸ¥è­˜æ¨è«–è™•ç†çŸ¥è­˜",
    data: [
      {id:"1", name:"çŸ¥è­˜æ¨è«–", qty:9},
      {id:"2", name:"çŸ¥è­˜è™•ç†", qty:7}
    ]
  },
  "é«˜éšä¸»ç®¡è³‡è¨Šç³»çµ±": {
    desc: "æŒæ¡ä¼æ¥­å…¨å±€æ‰€éœ€çš„è³‡è¨Š",
    data: [
      {id:"1", name:"ä¼æ¥­ç¸½è¦½", qty:6},
      {id:"2", name:"æ±ºç­–æ‘˜è¦", qty:4}
    ]
  }
};

let currentTopic = "äº¤æ˜“è™•ç†ç³»çµ±";

const titleEl = document.getElementById("topic-title");
const descEl = document.getElementById("topic-desc");
const tableBody = document.querySelector("#items-table tbody");
const form = document.getElementById("item-form");
const idField = document.getElementById("item-id");
const nameField = document.getElementById("item-name");
const qtyField = document.getElementById("item-qty");
const clearBtn = document.getElementById("clear-form");
const pieChart = document.getElementById("pieChart");

document.querySelectorAll("nav button").forEach(btn => {
  btn.addEventListener("click", () => {
    document.querySelectorAll("nav button").forEach(b => b.classList.remove("active"));
    btn.classList.add("active");
    currentTopic = btn.getAttribute("data-topic");
    updateTopic();
  });
});

function updateTopic() {
  titleEl.textContent = currentTopic;
  descEl.textContent = topics[currentTopic].desc;
  idField.value = "";
  nameField.value = "";
  qtyField.value = 1;
  render();
}

function render() {
  const data = topics[currentTopic].data;
  tableBody.innerHTML = "";
  data.forEach(item => {
    const tr = document.createElement("tr");
    tr.innerHTML = `<td>${item.name}</td>
                    <td>${item.qty}</td>
                    <td>
                      <button class="action-btn" onclick="editItem('${item.id}')">ç·¨è¼¯</button>
                      <button class="action-btn" onclick="deleteItem('${item.id}')">åˆªé™¤</button>
                    </td>`;
    tableBody.appendChild(tr);
  });
  drawPie(data);
}

window.editItem = id => {
  const item = topics[currentTopic].data.find(i => i.id === id);
  if (item) {
    idField.value = item.id;
    nameField.value = item.name;
    qtyField.value = item.qty;
  }
};

window.deleteItem = id => {
  topics[currentTopic].data = topics[currentTopic].data.filter(i => i.id !== id);
  render();
};

form.addEventListener("submit", e => {
  e.preventDefault();
  let data = topics[currentTopic].data;
  if (idField.value) {
    data = data.map(i => i.id === idField.value ? { ...i, name: nameField.value, qty: Number(qtyField.value) } : i);
  } else {
    data.push({ id: Date.now().toString(), name: nameField.value, qty: Number(qtyField.value) });
  }
  topics[currentTopic].data = data;
  idField.value = "";
  nameField.value = "";
  qtyField.value = 1;
  render();
});

clearBtn.addEventListener("click", () => {
  idField.value = "";
  nameField.value = "";
  qtyField.value = 1;
});

function drawPie(data) {
  const ctx = pieChart.getContext("2d");
  ctx.clearRect(0,0,pieChart.width,pieChart.height);
  if (!data.length) return;
  
  const total = data.reduce((sum, i) => sum + Number(i.qty), 0);
  let startAngle = 0;
  const colors = ["#e5989b","#ffb4a2","#d4a373","#c89f9c","#b5838d","#f6bd60","#f7ede2"];
  
  data.forEach((item, idx) => {
    const sliceAngle = (Number(item.qty) / total) * 2 * Math.PI;
    ctx.beginPath();
    ctx.moveTo(pieChart.width/2, pieChart.height/2);
    ctx.arc(pieChart.width/2, pieChart.height/2, 100, startAngle, startAngle + sliceAngle);
    ctx.closePath();
    ctx.fillStyle = colors[idx % colors.length];
    ctx.fill();

    // åœ–è¡¨æ¨™ç±¤
    const midAngle = startAngle + sliceAngle / 2;
    const labelX = pieChart.width/2 + Math.cos(midAngle) * 120;
    const labelY = pieChart.height/2 + Math.sin(midAngle) * 120;
    ctx.fillStyle = "#5b3a29";
    ctx.font = "14px Noto Serif TC";
    ctx.textAlign = "center";
    ctx.fillText(item.name, labelX, labelY);
    
    startAngle += sliceAngle;
  });
}

updateTopic();
</script>
</body>
</html>
